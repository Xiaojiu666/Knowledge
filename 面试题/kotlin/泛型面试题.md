
## 1. ä»€ä¹ˆæ˜¯æ³›å‹ï¼Ÿä¸ºä»€ä¹ˆéœ€è¦æ³›å‹ï¼Ÿ
æ³›å‹ï¼ˆGenericsï¼‰æ˜¯ä¸€ç§ **ç±»å‹å‚æ•°åŒ–** çš„æœºåˆ¶ï¼Œä½¿ä»£ç æ›´åŠ  **é€šç”¨ã€ç±»å‹å®‰å…¨ã€å¯å¤ç”¨**ã€‚

ç¤ºä¾‹ï¼š
```kotlin
class Box<T>(val value: T)
val intBox = Box(123)  // T å˜ä¸º Int
val stringBox = Box("Hello")  // T å˜ä¸º String
```

---

## 2. Kotlin æ³›å‹å’Œ Java æ³›å‹æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- Kotlin æ³›å‹æ›´å¼ºå¤§ï¼Œæ”¯æŒ **åå˜ï¼ˆoutï¼‰ã€é€†å˜ï¼ˆinï¼‰**ã€‚
- Kotlin æ³›å‹ **é»˜è®¤æ˜¯å¯å˜çš„**ï¼ˆJava éœ€è¦ `? extends` / `? super` è¿›è¡Œé™åˆ¶ï¼‰ã€‚
- Kotlin **ä¸æ”¯æŒåŸå§‹ç±»å‹ï¼ˆRaw Typeï¼‰**ï¼ŒJava å…è®¸ä¸æŒ‡å®šæ³›å‹ç±»å‹ã€‚
- Kotlin **æ”¯æŒ reified æ³›å‹**ï¼ŒJava ç”±äº **ç±»å‹æ“¦é™¤** æ— æ³•åœ¨è¿è¡Œæ—¶è·å–æ³›å‹ç±»å‹ã€‚

---

## 3. ä»€ä¹ˆæ˜¯åå˜ï¼ˆCovarianceï¼‰å’Œé€†å˜ï¼ˆContravarianceï¼‰ï¼ŸKotlin å¦‚ä½•å®ç°ï¼Ÿ

### **åå˜ï¼ˆCovariantï¼Œoutï¼‰**
- `out` å…³é”®å­—ç”¨äº **ç”Ÿäº§è€…ï¼ˆProducerï¼‰**ï¼Œåªèƒ½ä½œä¸º **è¿”å›å€¼**ï¼Œä¸èƒ½ä½œä¸º **å‚æ•°**ã€‚
- **å­ç±»å‹å¯ä»¥æ›¿ä»£çˆ¶ç±»å‹**ï¼ˆç±»ä¼¼ `List<? extends T>`ï¼‰ã€‚
- **ä¾‹å­ï¼š`List<T>` åªèƒ½è¯»å–æ•°æ®ï¼Œä¸èƒ½ä¿®æ”¹æ•°æ®**ã€‚

```kotlin
interface Producer<out T> {
    fun produce(): T
}

val producer: Producer<String> = object : Producer<String> {
    override fun produce() = "Hello"
}

val anyProducer: Producer<Any> = producer  // åå˜ï¼ŒString æ˜¯ Any çš„å­ç±»å‹
```

### **é€†å˜ï¼ˆContravariantï¼Œinï¼‰**
- `in` å…³é”®å­—ç”¨äº **æ¶ˆè´¹è€…ï¼ˆConsumerï¼‰**ï¼Œåªèƒ½ä½œä¸º **å‚æ•°**ï¼Œä¸èƒ½ä½œä¸º **è¿”å›å€¼**ã€‚
- **çˆ¶ç±»å‹å¯ä»¥æ›¿ä»£å­ç±»å‹**ï¼ˆç±»ä¼¼ `List<? super T>`ï¼‰ã€‚
- **ä¾‹å­ï¼š`Comparator<T>` åªæ¶ˆè´¹æ•°æ®ï¼Œä¸äº§ç”Ÿæ•°æ®**ã€‚

```kotlin
interface Consumer<in T> {
    fun consume(value: T)
}

val stringConsumer: Consumer<String> = object : Consumer<String> {
    override fun consume(value: String) = println("Consuming $value")
}

val anyConsumer: Consumer<Any> = stringConsumer  // é€†å˜ï¼ŒAny æ˜¯ String çš„çˆ¶ç±»å‹
```

|  å…³é”®å­—  |  å˜å‹  |  ä½œç”¨  |  ä¾‹å­  |
|:-------:|:----:|:----:|:------:|
| `out`  |  åå˜  |  åªèƒ½è¿”å› Tï¼Œä¸ä½œä¸ºå‚æ•°  | `List<T>`  |
| `in`  |  é€†å˜  |  åªèƒ½ä½œä¸ºå‚æ•°ï¼Œä¸ä½œä¸ºè¿”å›å€¼  | `Comparator<T>`  |

---

## 4. æ³›å‹çš„ `*` æ˜Ÿå·æŠ•å½±ï¼ˆStar Projectionï¼‰æ˜¯åšä»€ä¹ˆçš„ï¼Ÿ
`*` ç”¨äº **ä¸å…³å¿ƒå…·ä½“ç±»å‹** çš„æƒ…å†µä¸‹ï¼Œé€‚ç”¨äº **åªè¯»** æˆ– **åªå†™** çš„åœºæ™¯ã€‚

```kotlin
fun printList(list: List<*>) {
    for (item in list) println(item)
}
val intList: List<Int> = listOf(1, 2, 3)
val stringList: List<String> = listOf("A", "B", "C")
printList(intList)
printList(stringList)
```

âš ï¸ `List<*>` ä¸èƒ½è¿›è¡Œ **å†™æ“ä½œ**ï¼Œå› ä¸ºå®ƒçš„å…·ä½“ç±»å‹æ˜¯ä¸ç¡®å®šçš„ã€‚

---

## 5. Kotlin æ³›å‹çš„ `reified` å…³é”®å­—æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆä½œç”¨ï¼Ÿ
`reified` è§£å†³äº† **ç±»å‹æ“¦é™¤ï¼ˆType Erasureï¼‰** é—®é¢˜ï¼Œä½¿å¾— **è¿è¡Œæ—¶å¯ä»¥è·å–æ³›å‹çš„çœŸå®ç±»å‹**ã€‚

```kotlin
inline fun <reified T> printType(value: T) {
    println("Type of T: ${T::class.java}")
}
printType(123)  // Type of T: class java.lang.Integer
printType("Hello")  // Type of T: class java.lang.String
```

---

## 6. Kotlin æ³›å‹çš„ `where` å…³é”®å­—ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ
`where` é™åˆ¶æ³›å‹ **å¿…é¡»æ»¡è¶³å¤šä¸ªçº¦æŸ**ï¼Œç±»ä¼¼ Java çš„ `T extends Number & Serializable`ã€‚

```kotlin
fun <T> printNumber(value: T) where T : Number, T : Comparable<T> {
    println("Number: $value")
}
printNumber(100)  // âœ… æ­£ç¡®
printNumber(10.5)  // âœ… æ­£ç¡®
// printNumber("Hello")  // âŒ é”™è¯¯ï¼šString ä¸æ˜¯ Number
```

---

## 7. Kotlin æ³›å‹å¦‚ä½•é¿å… `Unchecked Cast` è­¦å‘Šï¼Ÿ
ä½¿ç”¨ `is` è¿›è¡Œ **å®‰å…¨ç±»å‹æ£€æŸ¥** æˆ– `reified` é¿å…ç±»å‹æ“¦é™¤ã€‚

```kotlin
fun <T> unsafeCast(obj: Any): T {
    return obj as T  // è­¦å‘Šï¼šUnchecked Cast
}
inline fun <reified T> safeCast(obj: Any): T? {
    return obj as? T  // å®‰å…¨è½¬æ¢
}
```

---

## 8. æ³›å‹çš„ `T : Any` å’Œ `T : SomeClass` æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ
- `T : Any` **çº¦æŸ T ä¸èƒ½ä¸º null**ï¼Œç±»ä¼¼ Java `T extends Object`ã€‚
- `T : SomeClass` è®© `T` ç»§æ‰¿ `SomeClass`ï¼Œç¡®ä¿ `T` å…·æœ‰ `SomeClass` çš„åŠŸèƒ½ã€‚

```kotlin
fun <T : Any> printNotNull(value: T) {
    println(value)
}
printNotNull("Hello")  // âœ… æ­£ç¡®
// printNotNull(null)  // âŒ ç¼–è¯‘é”™è¯¯ï¼Œå› ä¸º T ä¸èƒ½ä¸º null
```

---

## 9. Kotlin æ³›å‹å¦‚ä½•å®ç°å·¥å‚æ¨¡å¼ï¼Ÿ
```kotlin
inline fun <reified T> createInstance(): T {
    return T::class.java.getDeclaredConstructor().newInstance()
}
class User(val name: String = "Default")
val user: User = createInstance()
println(user.name)  // è¾“å‡º "Default"
```

---

## 10. Kotlin æ³›å‹æœ€ä½³å®è·µæ€»ç»“
|  ä¸»é¢˜  |  å…³é”®ç‚¹  |
|:------:|:------:|
| æ³›å‹åŸºç¡€ | `class Box<T>`ï¼Œ`fun <T> foo(t: T)` |
| åå˜ | `out`ï¼Œç”¨äº **ç”Ÿäº§è€…**ï¼Œåªè¯» |
| é€†å˜ | `in`ï¼Œç”¨äº **æ¶ˆè´¹è€…**ï¼Œåªå†™ |
| æ˜Ÿå·æŠ•å½± | `List<*>` é€‚ç”¨äºæœªçŸ¥ç±»å‹ |
| reified | è¿è¡Œæ—¶è·å–æ³›å‹ç±»å‹ |
| where å…³é”®å­— | é™åˆ¶æ³›å‹å¤šä¸ªçº¦æŸ |
| ç±»å‹æ“¦é™¤ | è§£å†³æ–¹æ³•ï¼š`reified` æˆ– `is` è¿›è¡Œå®‰å…¨è½¬æ¢ |

å¦‚æœä½ æœ‰æ›´å¤šå…·ä½“çš„æ³›å‹é—®é¢˜ï¼Œæ¬¢è¿ç»§ç»­æé—®ï¼ğŸ˜Š

